{% extends 'core/base.html' %}

{% block content %}

  <div class="max-w-md mx-auto mt-10 bg-white p-5 rounded shadow-sm">
    <h2 class="text-2xl font-bold mb-5">Login</h2><hr/>
    {% include "fragments/login_form.html" %}
  </div>

  <script>
    document.getElementById('login-form').onsubmit = async function(e) {
        e.preventDefault();
        const formData = new formData(this);
        const response = await fetch('/auth/login/', {
        method: 'POST',
        body: formData
        });
        if (response.ok) {
            const data = await response.json();
            alert("Login successful");
            {% comment %} window.location.href = '/auth/register/'; {% endcomment %}
        } else {
            alert("Login failed");
        }
    }
  </script>
{% endblock %}
